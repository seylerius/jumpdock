#+title: JumpDock â€” Jumpchain, Simplified
#+author: Elliott Seyler / Seth Seylerius

This is a simplified tool for hosting and using CYOAs, 
especially Jumpchain-compatible ones. 

* Data Structure

** CYOA

+ Represented as an EDN file per-CYOA

*** Choices

Map of ~choice~ items, represented in maps

+ ~:title~ :: string
+ ~:description~ :: string
+ ~:cost~  :: sequence of sequences
  + ~<price>~ :: number, positive to charge the user, negative to
                credit the user
  + ~<currency>~ :: keyword
+ ~:tags~ :: sequence of keywords, 
             or instead of a keyword tag 
             may optionally be a pair of the tag keyword and one of
             the following options
  + ~:apply~ :: Applies the tag to the user's picks
  + ~:set~ :: Sets the tag to a particular value, 
              followed by the value or a sequence:
    + ~<type>~ :: Either ~:number~ or an item tag
                 (which allows selection from items with that tag)
    + ~<value>~ :: How the value is set
      + ~:query~ :: Ask the user for the value
      + ~:spin~ :: Randomly pick one of the tagged items
      + Roll Spec :: A dice specification as a string, such as
                     ~"1d6+3"~ or ~"2d9+1d5-2"~ or ~"4d2x5"~
  + ~:discount~ :: Discounts the price by 50% 
                   if the user possesses the tag
  + ~:free~ :: Ignores cost if the user possesses the tag
+ ~:sort-priority~ :: number, defaults to 10
+ ~:category~ :: Display category as a string,
                 such as ~"Items"~ or ~"Perks"~, 
                 ~nil~ to not display (such as setting a value)

*** Layout

Sequence of the contents. Possible contents are as follows:

+ String :: Markdown text
+ Keyword :: ~choice~ items matching that tag, sorted by:
  + ~cost~ (ascending)
  + ~sort-priority~ (ascending)
  + ~tags~ (tags-not-in-common, sorted ascending)
  + ~title~ (ascending)
+ Sequence :: A child layout

If a layout only contains two tags and nothing else, 
it is arranged in columns (given sufficient space).
